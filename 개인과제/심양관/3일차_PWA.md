## PWA(Progressive Web App)ë€ ë¬´ì—‡ì¸ê°€?
ì¹´í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨ ë“±ì˜ ì•±ë“¤ì€ ëŒ€ë¶€ë¶„ ë„¤ì´í‹°ë¸Œ ì•±ì´ë‹¤. í•˜ì§€ë§Œ ì•±ê¹Œì§€ ë”°ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šê³ ë„, ì›¹ì—ì„œ ì•±ì²˜ëŸ¼ ì“¸ ìˆ˜ ì—†ì„ê¹Œ? ë¼ëŠ” ê³ ë¯¼ì— ëŒ€í•´ì„œ ë‹¤ì–‘í•œ ëŒ€ë‹µ ì¤‘ í•˜ë‚˜ê°€ PWA(Progressive Web App)ì´ë‹¤. ì¦‰, ì›¹ ì•±ì¸ë° ë„¤ì´í‹°ë¸Œ ì•± ê°™ì€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì›¹ ê¸°ìˆ ì´ë‹¤. 

### Progressiveì˜ ì˜ë¯¸
PWAëŠ” ì–´ë–¤ í™˜ê²½ì—ì„œë“  ìµœì„ ì„ ë‹¤í•œë‹¤ë¼ëŠ” ì² í•™ì„ ê°€ì§€ê³  ìˆë‹¤. ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ê°€ ìµœì‹ ì´ë©´ ìµœì‹ ì¼ìˆ˜ë¡ ë” í’ë¶€í•œ ê¸°ëŠ¥(ì˜¤í”„ë¼ì¸, í‘¸ì‹œ, ì„¤ì¹˜ ë“±)ì„ ì œê³µí•˜ê³ , ë¸Œë¼ìš°ì €ê°€ ì˜›ë‚  ê²ƒì´ë¼ë©´ ìµœì†Œí•œì˜ ì›¹ ì‚¬ì´íŠ¸ ê¸°ëŠ¥ë§Œ ì œê³µí•œë‹¤. ì´ì— ì ì§„ì ìœ¼ë¡œ í–¥ìƒ => (progressive enhencement)ë¼ê³  ë¶€ë¥¸ë‹¤. 

### PWAì˜ íŠ¹ì§•
- ì„¤ì¹˜ ê°€ëŠ¥
    - ì‚¬ìš©ìê°€ ì›¹ì‚¬ì´íŠ¸ë¥¼ ëª¨ë°”ì¼ì´ë‚˜ PCì˜ í™ˆ í™”ë©´ì— ì•± ì•„ì´ì½˜ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. 
    - ë„¤ì´í‹°ë¸Œ ì•±ì²˜ëŸ¼ ë³„ë„ì˜ ìŠ¤í† ì–´ì—ì„œ ë‹¤ìš´ë¡œë“œí•  í•„ìš”ê°€ ì—†ë‹¤.
- ì˜¤í”„ë¼ì¸ì—ì„œë„ ì‘ë™ (offline capable)
    - ì„œë¹„ìŠ¤ ì›Œì»¤(Service Worker) ë•ë¶„ì—, í•œ ë²ˆ ë°©ë¬¸í•œ í˜ì´ì§€ëŠ” ìºì‹œì— ì €ì¥ë¼ì„œ ì¸í„°ë„·ì´ ëŠê²¨ë„ ë™ì‘í•œë‹¤.
    - ì´ë¥¼ í†µí•´ ëŠë¦° ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œë„ ì•±ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ì—´ë¦°ë‹¤.
- í‘¸ì‹œ ì•Œë¦¼
    - ë„¤ì´í‹°ë¸Œ ì•±ì²˜ëŸ¼ ì‚¬ìš©ìì—ê²Œ í‘¸ì‹œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.
- HTTPS í•„ìˆ˜ 
    - HTTPSë¥¼ ë°˜ë“œì‹œ ì‚¬ìš©í•´ì•¼ ì„œë¹„ìŠ¤ì›Œì»¤ê°€ ë“±ë¡ë˜ê³ , PWAê°€ ì •ìƒ ì‘ë™í•œë‹¤.
    - ì´ëŸ¬í•œ íŠ¹ì„±ìœ¼ë¡œ ì¸í•˜ì—¬ ë³´ì•ˆ(ì¤‘ê°„ì ê³µê²© ë°©ì§€)ë„ ê¸°ë³¸ìœ¼ë¡œ ê°•í™”ëœë‹¤. 
- ë°˜ì‘í˜•
    - ìŠ¤ë§ˆíŠ¸í°, íƒœë¸”ë¦¿, PCë“± ì–´ë–¤ ë””ë°”ì´ìŠ¤ì—ì„œë„ í™”ë©´ì´ êº ì§€ì§€ ì•Šê³  ìœ ì—°í•˜ê²Œ ì‘ë™í•œë‹¤.
- ê²€ìƒ‰ ë° ê³µìœ 
    - ì•±ìŠ¤í† ì–´ ë§í¬ ì—†ì´ë„ URL í•˜ë‚˜ë§Œ ë³µì‚¬í•´ ë³´ë‚´ë©´, ìƒëŒ€ë°©ì€ ë°”ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì¼ ì•±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. 

### PWAì˜ ì¥ì 
- Single codebase
    - IOS, Android, PC ê°ê° ë”°ë¡œ ê°œë°œí•  í•„ìš” ì—†ì´, ì›¹ ê¸°ìˆ  í•˜ë‚˜(HTML, CSS, JS)ë¡œ ëª¨ë‘ ì»¤ë²„í•  ìˆ˜ ìˆë‹¤.
    - ìœ ì§€ë³´ìˆ˜ì— ìœ ë¦¬í•˜ë‹¤.
- ë¹ ë¥¸ ë¡œë”©, ëŠê¹€ ì—†ëŠ” ê²½í—˜
    - ìºì‹œì™€ ì„œë¹„ìŠ¤ ì›Œì»¤ ë•ë¶„ì— ë‘ ë²ˆì§¸ ë°©ë¬¸ë¶€í„°ëŠ” ë¡œë”©ì´ ì¦‰ê°ì ì´ë‹¤.
    - ì˜¤í”„ë¼ì¸ì—ì„œë„ ëŒì•„ê°€ì„œ ì‚¬ìš©ì ê²½í—˜ì´ íƒì›”í•˜ë‹¤.
- í‘¸ì‹œ ì•Œë¦¼ + ì„¤ì¹˜
    - ì›¹ì„ì—ë„ ë¶ˆêµ¬, í‘¸ì‹œ ì•Œë¦¼ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.
    - ì‚¬ìš©ìê°€ ì§ì ‘ í™ˆ í™”ë©´ì— ì„¤ì¹˜í•  ìˆ˜ ìˆì–´ ì•±ì²˜ëŸ¼ ë³´ì´ë©°, ì‹¤í–‰ë„ ë„¤ì´í‹°ë¸Œ ì•±ì²˜ëŸ¼ ë¹ ë¥´ë‹¤.

### PWAì˜ ë‹¨ì 
- í•˜ë“œì›¨ì–´ ì—°ë™ì€ ì œí•œì 
    - NFC, ë¸”ë£¨íˆ¬ìŠ¤, ì§„ë™, ê·¼ì ‘ ì„¼ì„œ ê°™ì€ ê¸°ëŠ¥ì€ ë„¤ì´í‹°ë¸Œ SDKë³´ë‹¤ ë²”ìœ„ê°€ ì œí•œì ì´ë‹¤.
    - ë” ë§ì€ APIê°€ ë‚˜ì˜¤ê¸´ í–ˆìœ¼ë‚˜ ì•„ì§ ì™„ì „í•˜ì§€ ì•Šë‹¤.
- ë¸Œë¼ìš°ì €ë§ˆë‹¤ í˜¸í™˜ì„± í¸ì°¨
    - IOS SafariëŠ” í•œë™ì•ˆ í‘¸ì‹œ ì•Œë¦¼ì¡°ì°¨ ì§€ì›í•˜ì§€ ì•Šì•„ í° ë¶ˆë§Œì´ ìˆì—ˆë˜ ê²½ìš°ê°€ ìˆë‹¤. ìµœê·¼ì—ì„œì•¼ ì¡°ê¸ˆì”© ê°œì„ ë˜ì–´ ê°€ëŠ” ì¤‘ì´ì§€ë§Œ, ì•„ì§ë„ í”Œë«í¼ì— ë”°ë¼ ì„¸ì„¸í•œ ê¸°ëŠ¥ ì°¨ì´ê°€ ì¡´ì¬í•œë‹¤. 

### í•œ ì¤„ ìš”ì•½: PWAëŠ” â€œì›¹ì´ì§€ë§Œ ì•±ì²˜ëŸ¼ ì‘ë™í•˜ëŠ” ìƒˆë¡œìš´ ì›¹ ì•± í˜•íƒœâ€ë¡œ, ì„¤ì¹˜, ì˜¤í”„ë¼ì¸, í‘¸ì‹œë¥¼ ê°–ì¶˜ ê°€ì¥ ì§„í™”ëœ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

## PWAë¥¼ ìœ„í•œ Figma ì™€ì´ì–´ í”„ë ˆì„ ê¸°ë³¸ ê°€ì´ë“œ
    1. ê¸°ë³¸ í”„ë ˆì„ 
        - Moblie-first ì ‘ê·¼ì„ ê¶Œì¥í•˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ í”„ë ˆì„ìœ¼ë¡œ iPhone13 (390 Ã— 844), Pixel5 (393 Ã— 851), iPhone X~13(375 Ã— 812) ì´ ë³´í¸ì ì´ë‹¤. 
        - PWAëŠ” ì£¼ë¡œ ëª¨ë°”ì¼ í™ˆí™”ë©´ì— ì„¤ì¹˜ë˜ê³  ë°˜ì‘í˜• ê¸°ì¤€ì ìœ¼ë¡œ í™•ì¥í•˜ëŠ” ê²ƒì´ ìœ ë¦¬í•˜ê¸° ë•Œë¬¸ì— ëª¨ë°”ì¼ í”„ë ˆì„ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. 
    2. ì˜¤í”„ë¼ì¸ í™”ë©´ì´ í•„ìš”í•˜ë‹¤ë©´ ë³„ë„ ì„¤ê³„
    3. í‘¸ì‹œ ì•ŒëŒ ê¶Œí•œ UXë¥¼ ì ì ˆí•œ íë¦„ì— ì‚½ì…
    4. ì „ì²´ í™”ë©´(notch í¬í•¨) ì—¬ë°± & theme-color ì‹œë®¬ë ˆì´ì…˜

    5. íƒ€ í”Œë ›í¼ ì°¸ê³ 
        | í•­ëª©           | Twitter Lite      | Starbucks PWA         |
        | ------------ | ----------------- | --------------------- |
        | **ì„¤ì¹˜ ìœ ë„ UX** | ë°°ë„ˆ + CTA          | ëª¨ë‹¬ + CTA              |
        | **í‘¸ì‹œ íë¦„**    | ë©”ì‹œì§€ ê¶Œí•œ íŒì—…         | ì£¼ë¬¸ ì•Œë¦¼ + ê¶Œí•œ íë¦„ í¬í•¨      |
        | **ì˜¤í”„ë¼ì¸ ëŒ€ì‘**  | íƒ€ì„ë¼ì¸ ìºì‹±, retry íŒì—… | ë©”ë‰´ ë¸Œë¼ìš°ì§• ìºì‹œ + fallback |
        | **ë„¤ë¹„ê²Œì´ì…˜**    | ì£¼ì†Œì°½ ì—†ëŠ” ì „ì²´ í™”ë©´      | ëª¨ë°”ì¼ í‘¸í„° ë©”ë‰´, ë°ìŠ¤í¬íƒ‘ ì—¬ë°±    |
        | **ë¡œë”© UX**    | ê°„ë‹¨ Loader         | Skeleton + ìŠ¤í”Œë˜ì‹œ       |

## PWA í”„ë¡ íŠ¸ì—”ë“œì˜ í•„ìš” ê¸°ìˆ  ì—­ëŸ‰
    1. Service Worker (í•µì‹¬)
        - ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ì— ë³„ë„ë¡œ ë“±ë¡ë˜ëŠ” JS ìŠ¤í¬ë¦½íŠ¸
            - ì˜¤í”„ë¼ì¸ì—ì„œë„ ë™ì‘
            - ìºì‹± ì „ëµì„ ì œì–´
            - í‘¸ì‹œ ì•Œë¦¼ ì²˜ë¦¬
        - register(), install, activate, fetch ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ë‹¤ë£¨ê±°ë‚˜, Workbox ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. 

        - Vue3ì—ì„œëŠ”?
            - vite-plugin-pwa ë˜ëŠ” @vue/cli-plugin-pwaë¥¼ ì„¤ì¹˜ -> ì„œë¹„ìŠ¤ì›Œì»¤ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±/ê´€ë¦¬í•œë‹¤. 
            - ì´ë•Œ Workboxë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ìºì‹± ì „ëµ(cacheFirst, networkFirst, staleWhileRevalidate ë“±)ë„ configì—ì„œ ì‰½ê²Œ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤. 

            ``` javascript
            npm install vite-plugin-pwa --save-dev

            // vite.config.js ì˜ˆì‹œ
            import { VitePWA } from 'vite-plugin-pwa'

            export default {
            plugins: [
                VitePWA({
                registerType: 'autoUpdate',
                workbox: {
                    runtimeCaching: [
                    {
                        urlPattern: /^https:\/\/api\.example\.com/,
                        handler: 'NetworkFirst',
                        options: { cacheName: 'api-cache' }
                    }
                    ]
                }
                })
            ]
            }
            ```

    2. manifest.json & install UX
        - PWAì˜ â€œì•± ì•„ì´ì½˜, ì´ë¦„, í…Œë§ˆìƒ‰, í™”ë©´ ëª¨ë“œâ€ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼.
        - í™ˆ í™”ë©´ì— ì„¤ì¹˜í•  ë•Œ ë³´ì´ëŠ” ì´ë¦„, ë¡œê³ , í…Œë§ˆ ìƒ‰ ë“±ì„ ì§ì ‘ ì„¤ì •.
        - Vue3ì—ì„œëŠ”?
            - vite-plugin-pwa ë˜ëŠ” Vue CLI PWA í”ŒëŸ¬ê·¸ì¸ì´ manifest.webmanifest ë¥¼ ìë™ ìƒì„±í•˜ê±°ë‚˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
            - beforeinstallprompt ì´ë²¤íŠ¸ë„ onMountedì—ì„œ ì§ì ‘ ì œì–´í•´ì„œ ì„¤ì¹˜ ëª¨ë‹¬ UX ì„¤ê³„ ê°€ëŠ¥

            ``` javascript
            onMounted(() => {
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault()
                myInstallPrompt.value = e // ë‚˜ì¤‘ì— showInstallPrompt()ì—ì„œ e.prompt()ë¡œ ì„¤ì¹˜ UX
            })
            })
            ```
            
    3. ì˜¤í”„ë¼ì¸ & ìºì‹± UX
        - ì˜¤í”„ë¼ì¸ì¼ ë•Œ graceful fallback (ì‚¬ìš©ìì—ê²Œ â€œì¸í„°ë„·ì´ ì—†ì–´ìš”â€ ì•ˆë‚´)
        - ì‚¬ì „ì— ë°ì´í„°(ì´ë¯¸ì§€, JSON ë“±) ìºì‹±
        - ë„¤íŠ¸ì›Œí¬ ìƒíƒœì— ë”°ë¥¸ UX ë³€í™” ì„¤ê³„

        - Vue3ì—ì„œëŠ”?
            - navigator.onLine ê³¼ window.addEventListener('online') / 'offline' ìœ¼ë¡œ Vueì—ì„œ ë¦¬ì•¡í‹°ë¸Œí•˜ê²Œ ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê´€ë¦¬ ê°€ëŠ¥
            - fallback UIëŠ” Vueì˜ v-ifë¡œ ì•„ì£¼ ì§ê´€ì ìœ¼ë¡œ ì²˜ë¦¬

            ``` javascript
            const isOnline = ref(navigator.onLine)

            onMounted(() => {
            window.addEventListener('online', () => isOnline.value = true)
            window.addEventListener('offline', () => isOnline.value = false)
            })

            // html
            <div v-if="!isOnline">ğŸ˜¢ ì¸í„°ë„·ì´ ì—†ì–´ìš”. ë‹¤ì‹œ ì—°ê²°í•´ ì£¼ì„¸ìš”.</div>
            ```
    
    4. ì •ë¦¬
    | PWA ê¸°ëŠ¥                  | Vue 3 í•´ì†Œ ë°©ì‹                                        |
    | ----------------------- | -------------------------------------------------- |
    | ì„œë¹„ìŠ¤ì›Œì»¤ & ìºì‹±              | `vite-plugin-pwa`, `@vue/cli-plugin-pwa` + Workbox |
    | manifest.json & install | plugin ìë™ ìƒì„± + `beforeinstallprompt` ì§ì ‘ UX         |
    | ì˜¤í”„ë¼ì¸ & ë„¤íŠ¸ì›Œí¬ UX          | Composition APIë¡œ `navigator.onLine`                |
    | í‘¸ì‹œ ì•Œë¦¼ & Notification    | ë¸Œë¼ìš°ì € API + SW ì§ì ‘ í•¸ë“¤ë§                               |
    | Lighthouse ì§„ë‹¨ & HTTPS   | vite build & Lighthouse, mkcert HTTPS              |
