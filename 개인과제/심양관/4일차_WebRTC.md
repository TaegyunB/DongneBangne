## Web RTC란?
- Web RTC란, Web Real-Time Communication의 약자로, JS API로 다음과 같은 기능들을 제공해주는 오픈소스이다. 

- 웹 실시간 통신이라는 것을 쉽게 알 수 있는데 이 말에서 의미하는 바와 같이 웹, 앱에서 비디오, 마이크, 텍스트 등을 이용해서 실시간 통신을 제공한다는 것이다. 포인트는 줌과 다른 화상회의 프로그램과 같이 단순 설치 없이 웹이나 앱상에서 바로 이용이 가능하는 것이다. 또한 화상 회의를 진행하면서 지연이 매우 짧다는 장점이 존재한다.
하지만 필요서 STUN 서버와 TURN 서버를 구축해야한다는 등의 번거로운 점이 존재한다. 

### 시그널링
- Web RTC는 상대방과 P2P연결을 통해 데이터를 상호교환한다. 하지만 연결하고 교환하기 전에 고려해야할 부분은 몇몇 존재한다. 
- 상대방과 연결을 하기 위해서는 상대방의 네트원크 정보가 필요할 것이며 상대방이 보내는 미디어 데이터 정보가 무엇인지에 대해 알고 전송과 수신 여부에 대해서 알아야한다. 
- 그래서 시그널링을 진행
- 시그널링 서버를 구축, 시그널링을 통해 Peer 간 정보들을 교환한다. 

### NAT
- 하나의 공인 IP를 여러 갸의 사설 IP로 쪼개 안에서 사용하고 있으면서 외부와 통신할 때는 앞에서 언급한 공인 IP로 통신을 진행하게 된다는 것이다. 
- 테이블을 통해 내부 네트워크에 존재하는 사설 IP와 포트 번호를 외부 네트워크와 통신할 때 사용하는 공인 IP와 포트와 매핑하여 저장해놓음으로써 이를 가능하게 한다. 
### STUN, 홀 펀칭
- 대부분의 PC나 스마트폰은 공유기 뒤에 있어서 내부 IP(예: 192.168.x.x)를 가짐.
- 이 상태에서 다른 장치가 나한테 직접 연결하려면 내 공인 IP와 포트가 필요함.
- STUN 서버는 이것을 알려주는 역할을 함.
- 정리하면 내 공인 IP주소와 포트 번호를 알게 해주는 서버 

- 홀 펀칭은 서로 NAT 뒤에 있는 클라이언트끼리 직접 연결할 수 있게 한다. 
### TURN
- 단순히 TURN Server과 A, B가 각각 연결을 맺고 이 서버에서 모든 교환 과정을 중계해준다. 

### 정리

✅ WebRTC 연결 과정 핵심 정리
1. 시그널링(Signaling)
목적: 상대방과 연결하기 위한 네트워크 정보(IP/PORT) 및 미디어 정보(코덱 등)를 교환

방법: WebSocket, REST API 등 원하는 방식으로 구현 (WebRTC 자체에는 포함되지 않음)

2. ICE (Interactive Connectivity Establishment)
역할: 상대방과의 연결을 위한 최적의 경로 후보(candidate) 를 수집하고 테스트하는 프레임워크

정보 수집 경로:

🔸 자신의 사설 IP/PORT

🔸 공인 IP/PORT → 📍 STUN 서버 사용

🔸 TURN 서버의 릴레이 IP/PORT → 📍 TURN 서버 사용 (직접 연결 실패 시 릴레이)

3. STUN / TURN
항목	설명
STUN (Session Traversal Utilities for NAT)	내 공인 IP/포트를 알아내기 위한 서버
TURN (Traversal Using Relays around NAT)	연결이 안 될 경우 중계 서버를 통해 우회 연결
사용 순서	STUN → 실패 시 TURN으로 전환 (ICE가 자동으로 처리)

4. WebRTC 전체 구조
🔹 시그널링 단계 → 연결 후보 수집 (ICE) → 후보 테스트 → P2P 연결 성립

실시간 미디어(오디오, 비디오, 데이터)는 PeerConnection을 통해 전송됨

개발자는 주로 브라우저의 WebRTC API(RTCPeerConnection, getUserMedia, DataChannel)를 사용하여 구현

📌 요약 한 줄 정리
WebRTC는 시그널링을 통해 네트워크/미디어 정보를 교환하고, ICE(STUN/TURN 포함)를 통해 최적의 P2P 경로를 찾아 실시간 통신을 가능하게 하는 기술이다.