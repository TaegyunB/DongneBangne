## 이번 공통 프로젝트는 JWT(JSON Web Token)라는 토큰을 활용하여 사용자 인증 기능을 구현한다. 

### 인증과 인가
- 인증이란 '사용자가 누구인지 증명'하는 과정이다. 핵심은 '내가 누구인지를 증명'하는 것이고, 로그인과 FaceID 등은 인증을 위한 수단이다. 
- 인가란 인증된 사용자에게 '권한을 부여'하는 과정이다. 인가에 대해서는 사용자가 별도로 요청할 것이 없다. 
- 인증과 인가의 핵심으로 개발자 입장에서 이를 구현할 때 신경 써야 할 부분은 크게 다음 두 가지이다.
    1. 보안:
    인증은 사용자의 정보가 필연적으로 오가게 된다. 이때 최대한 안전하게 오고 갈 수 있도록 해야하며, 인가 또한 user가 admin 권한을 가지게 해서는 안된다. 또한 사용자가 회원가입할 때, 사용자의 비밀번호를 평문 그대로 저장해서는 안된다. 
    2. 로그인 유지:
    매 요청을 할 때마다 로그인을 다시 해야 하는 서비스가 있다면, 그 서비스는 경쟁력이 부족할 것이다. 사용자 편의성을 위해서 로그인 유지가 될 수 있게 해야하는데 이때 나오는 개념이 세션, JWT와 같은 개념이다. 
    새션이란 서버 중심의 상태 관리이다. 서버가 클라이언트의 상태를 유지하기 위한 개념으로 고유한 sessionID가 부여되고, 이를 서버에서 매핑하여 기억한다. 이후 서버에 요청을 할 때, sessionID도 함깨 보내면서 사용자를 구분한다. 
    JWT는 클라이언트 중심의 상태 관리 기술이다. 

### 세션 인증

- 세션 인증 흐름
    1. 사용자 로그인 (사용자 -> 서버)
    2. 사용자 확인 (서버 -> 회원DB)     
    3. 회원 정보 세션 생성 (서버 -> 세션 저장소)
    4. SessionID 발급 (세션 저장소 -> 서버)
    5. 응답(SessionID) (서버 -> 사용자)
    6. 데이터 요청 (+쿠키) (사용자 -> 서버)
    7. 쿠키 검증 (서버 -> 세션 저장소)
    8. 유저 정보(세션) 획득 (세션 저장소 -> 서버)
    9. 응답(+ 요청데이터) (서버 -> 사용자)

- 세션 인증 특징
    1. MPA(Multiple Page Application)
    2. 전통적
    3. Server Side Rendering
    4. 서버의 메모리, 클라이언트의 쿠키
    5. 성능, 보안을 위해 대규모 시스템 구축에 전략적으로 사용
    6. 전통적인 PHP, JSP, ASP 등
    7. HTTP 통신은 상태를 가지지 않기 때문에, 세션과 JWT를 이용해 별도의 인증 상태를 유지한다. 

- 세션 인증 장점
    1. 서버 측 사용자 인증 확인이 분명하고 쉬움
    2. 서버 측에서 세션 정보를 관리
    3. 클라이언트에 의한 변조가 쉬움
    4. 부가정보가 적어 Server/Client 송수신 데이터가 상대적으로 적음

- 세션 인증 단점
    1. 대규모 서비스로의 Scale-Up 시 메모리 성능 부하 문제
    2. Redis, Memcached 등 별도 메모리 관리 시스템 염두
    3. 쿠키는 단일 도메인 및 서브 도메인에서만 동작하므로, 여러 도메인 사용 시 관리의 부담

- sessionID의 특징
    1. 고유해야 하고, 랜덤 값이 들어간다.
        a. 사용자를 유일하게 식별할 수 있어야하기 때문이다.
        b. 랜덤 값이 아니라면 다른 user의 sessionId를 유추할 수 있기 때문이다. 랜덤 값을 생성하기 위해 주로 UUID, 해시가 사용되곤 한다. 
    2. sessionID는 주로 쿠키나 세션을 저장하는 스토리지에 저장된다. 

### 토큰 인증

- 토큰 인증 흐름 (로그인 이후의 전체적인 플로우는 세션 방식과 유사)
    1. 토큰에 사용자 식별 정보 담기
    2. 믿을 수 있는 토큰인지 확인하기
    3. 토큰 자체에 대한 정보를 담기
- 토큰 인증 특징
    1. SPA(Single Page Application)
    2. 비교적 최신 트렌드
    3. 사용자 경험이 중요한 복잡한 Front-end 구현에 적합
    4. Vue, React, Angular 등
    5. 웹 브라우저 외 모바일, IoT 등 다양한 플랫폼 및 디바이스의 클라이언트를 하나의 Back-end 서비스 API로 대응 가능

- 토큰 인증 장점
    1. 멀티 플랫폼 서비스 대응에 유리
    2. 토큰 정보를 클라이언트가 보유
    3. 서버의 Scle-Up 부담이 상대적으로 낮음
    4. 클라이언트 세션 관리에 대한 서버 메모리 부담 감소
    5. 다양한 도메인 대응 부담 감소

- 토큰 인증 단점
    1. 클라이언트 토큰 정보 탈취로 보안적인 부분의 상대적 취약 가능성
    2. 토큰에 Signature 와 같은 부가정보가 있어, 세션 기반 인증에 비해 Server-Client간 주고받는 데이터의 양 증가 
    3. 토큰 인증을 위한 Database 조회 발생으로, DB 성능 부하의 가능성

- 기타 
    1. 토큰 인증 방식 중에 가장 많이 사용되는 건 JWT이다
    2. JWT는 JSON Web Token의 약자로, 사용자 인증과 권한 부여에 사용되는 토큰이다. 
    3. JWT의 정체성은 stateless이다. 기본적으로 서버에서 별도로 상태를 저장할 필요가 없다. 
    4. JWT는 header, payload, signature로 이루어져 있다. 