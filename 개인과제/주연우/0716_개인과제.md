# 1. PWA(Progressive Web Apps)
- 웹으로 개발된 사이트를 앱처럼 사용할 수 있는 것.
- 브라우저에서 실행되는 WebApp을 마치 네이티브 앱처럼 만들어 주는 기술
- pwa 사이트에 접속한 경우, 바탕화면에 pwa를 설치한다는 팝업을 띄울 수도 있다.

### 우리 팀 프로젝트에서 PWA를 사용하는 이유
1. 개발 비용
우리 팀의 주제는 앱에 더 적합한 서비스이다. 따라서 앱 개발이 필요한데, 안드로이드 iOS 각 네이티브 앱을 개발하는 데 필요한 기술이 요구되지 않는 pwa 개발을 통해 개발 비용을 줄이고 앱 생산성을 극대화할 수 있다.

2. 다양한 기능 지원
pwa는 푸쉬 알림이 가능해서 웹에서도 이를 통한 사용자의 재참여 유도가 가능. PWA는 본질적으로는 웹이기 때문에 검색엔진을 통한 사용자 유입을 유도할 수 있다. 
우리 주제는 어르신들이 쉽게 사용할 수 있게하는게 목표이기 때문에 앱으로 쉽게 접근 가능하게 하기 위해 pwa 사용.

### PWA의 구성 요소
1. HTTPS
2. Web App Manifest
- 앱 이름, 아이콘, 시작 url, 테마색상 등을 정의하는 json 파일
```
{
  "name": "My App",
  "short_name": "App",
  "start_url": "/index.html",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#000000",
  "icons": [
    {
      "src": "icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    }
  ]
}

```
3. Service Worker
- 백그라운드에서 동작하는 javascript
- 캐싱, 푸시 알림, 오프라인 모드 가능
```
self.addEventListener('install', event => {
  // 캐시 초기화
});

self.addEventListener('fetch', event => {
  // 캐시에서 파일 제공
});
```

# 2. FCM(Firebase Cloud Messaging)
: 무료로 메세지를 전송할 수 있는 교차 플랫폼 메시징 솔루션

### 왜 사용하는가?
FCM은 플랫폼에 종속되지 않고 푸쉬 메세지를 전송할 수 있다.
iOS, 안드로이드, 웹 각 플랫폼 환경별로 개발하지 않고 하나로 통합하여 개발할 수 있는 장점이 있다.

서버를 경유하지 않고 FCM 서버를 중간에 둠으로써, 사용자는 낮은 배터리와 네트워크의 사용만으로도 메세지를 실시간으로 송수신 처리할 수 있다.

# 3. PWA + FCM 플로우 정리
1. 사용자 접속
- 사용자가 웹 브라우저로 PWA에 접속

2. 서비스 워크 등록
- 푸시 알림 수신, 캐싱, 오프라인 지원 등을 담당

3. Firebase 초기화 + 권한 요청
- 앱이 Firebase SDK를 통해 푸시 알림 권한 요청
- 사용자가 허용하면 브라우저가 FCM 토큰 발급 -> 기기 식별용 ID

4. 클라이언트 FCM 토큰 발급 + 서버 전달
- 클라이언트는 FCM 토큰을 받아 백엔드 서버에 전송
- 서버는 토큰을 DB에 저장

5. 서버에서 푸시 메세지 전송 요청
- 알림 발생
- 백엔드 서버는 FCM 서버에 저장된 토큰으로 푸시 메시지를 전송 요청

6. FCM -> 브라우저에 푸시 전달
- FCM은 해당 토큰을 가진 클라이언트의 브라우저에 메시지 전달
- 백그라운드에서 해당 과정 처리됨 (웹앱이 꺼져 있어도 가능)

7. 서비스 워커가 푸시 수신 후 알림 표시
- 푸시가 도착하면 서비스 워커.js 가 받아서 처리
- Notification API를 통해 알림 UI를 브라우저에 표시