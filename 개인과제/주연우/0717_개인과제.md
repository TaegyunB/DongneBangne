# 1. OAuth (Open Authorization)
정의: OAuth는 인터넷 사용자들이 비밀번호를 제공하지 않고 다른 웹 사이트 상의 자신들의 정보에 대해 웹 사이트나 애플리케이션의 접근 권한을 부여할 수 있는 공통적인 수단으로서 사용되는 접근 위임을 위한 개방형 표준

- 사용자가 해당 어플리케이션에 id, pw등의 정보를 제공하지 않고 외부 앱의 Open API에 ID, PW를 입력하여 해당 어플리케이션이 인증 과정을 처리해주는 방식

### 우리 팀에서 OAuth를 사용하는 이유
어르신을 대상으로 하는 서비스를 기획하고 있기 때문에, 적은 정보로 편리하게 회원가입, 로그인이 이루어지는 것에 초점을 두고 방법을 고안하였다. OAuth는 이런 점에서 편리하기 때문에 선택하게 되었다.

# 2. OAuth 2.0 용어
| 용어                       | 설명                                            |
| ------------------------ | --------------------------------------------- |
| **Resource Owner**       | 자원 소유자 (보통 사용자)                               |
| **Client**               | 자원에 접근하려는 앱 (ex. 내가 만든 앱)                     |
| **Resource Server**      | 사용자 자원을 호스팅하는 서버 (ex. 구글 캘린더 API 서버)          |
| **Authorization Server** | 인증/인가를 처리하고 토큰을 발급하는 서버 (ex. Google OAuth 서버) |
| **Access Token**         | 리소스에 접근할 수 있는 권한을 나타내는 토큰                     |
| **Refresh Token**        | 액세스 토큰이 만료되었을 때 새로 발급받기 위한 토큰                 |
| **Redirect URI**         | 인증 완료 후, 사용자 브라우저를 리디렉션할 URI (보안 중요)          |
| **Scope**                | 접근 권한의 범위 (ex. profile, email, calendar 등)    |

# 3. OAuth 2.0 동작 흐름
1. 사용자 요청 (Client → Authorization Server)
사용자가 로그인 버튼 클릭
→ 인증 서버로 리디렉션
→ 사용자 로그인 후 권한 부여

2. Authorization Code 반환 (Authorization Server → Client)
인증 완료 후 redirect URI로 code 전달

3. Access Token 요청 (Client → Authorization Server)
받은 code와 함께 토큰 요청
→ 인증 서버가 Access Token 발급

4. API 접근 (Client → Resource Server)
발급받은 토큰을 사용하여 사용자 자원에 접근

![alt text](image.png)

# 4. 주의할 점
- Access Token은 수명이 짧기 때문에 Refresh Token과 함께 사용해야 한다.
- Redirect url은 사전 등록이 필요하다
- HTTPS는 필수다 -> 토큰 유출 방지
- Scope 최소화 (과한 권한 요청 금지

# 5. OAuth vs. 인증
OAuth는 권한 위임을 위한 인가 프로토콜이다. 인증이라는 다름.   
인증을 위해서는 OpenID Connect와 함께 사용