<template>
  <div>
    <!-- template1 test -->
    <!-- <NewsTemplateOne 
      ref="pdfComponent"
      v-bind="newsData"
    /> -->
    <NewsTemplateTwo 
      ref="pdfComponent"
      v-bind="newsData"
    />
    
    <div class="save-button">
      <button @click="saveAsPDF">ğŸ“„ PDFë¡œ ì €ì¥í•˜ê¸°</button>
    </div>
  </div>
</template>

<script setup>
import NewsTemplateOne from '@/components/NewsTemplateOne.vue'
import NewsTemplateTwo from '@/components/NewsTemplateTwo.vue'
import html2pdf from 'html2pdf.js'
import { ref, nextTick } from 'vue' // 

const pdfComponent = ref(null)

//template1 test
// const newsData = {
//   seniorCenterName: 'ê°•ì¼ë¦¬ë²„íŒŒí¬',
//   month: '07',
//   ranking: 1,
//   headline: 'AIê°€ ìƒì„±í•œ í—¤ë“œë¼ì¸',
//   content: ' ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.',
//   imageUrl: 'https://picsum.photos/300'
// }

//template2 test
const newsData = {
  seniorCenterName: 'ê°•ì¼ë¦¬ë²„íŒŒí¬',
  month: '07',
  ranking: 1,
  // ê¸°ì‚¬1
  headline1: 'AIê°€ ìƒì„±í•œ ì²« ë²ˆì§¸ ë„ì „ì²« ë²ˆì§¸ ë„ì „',
  content1: 'ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤.',
  imageUrl1: 'https://picsum.photos/300?random=1',
  // ê¸°ì‚¬2
  headline2: 'AIê°€ ìƒì„±í•œ ë‘ ë²ˆì§¸ ë„ì „',
  content2: 'ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤. ì—¬ë¦„ì²  ê±´ê°•ì„ ì§€í‚¤ê¸° ìœ„í•´ ë°±ìˆ™ì„ í•¨ê»˜ ì¦ê²¼ìŠµë‹ˆë‹¤.ì²« ë²ˆì§¸ ë„ì „ ë‚´ìš©ì…ë‹ˆë‹¤.',
  imageUrl2: 'https://picsum.photos/300?random=2'
}


const saveAsPDF = async () => {
  await nextTick()
  const element = pdfComponent.value?.pdfTarget

  if (!element) {
    alert("PDF íƒ€ê²Ÿì´ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ì–´ìš”!")
    return
  }

  const opt = {
    margin: [5, 5, 5, 5],
    filename: `${newsData.seniorCenterName}_${newsData.month}_ì‹ ë¬¸.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: {
      scale: 1.5,
      useCORS: true,
      allowTaint: true,
      scrollX: 0,
      scrollY: 0
    },
    jsPDF: {
      unit: 'mm',
      format: 'a4',
      orientation: 'portrait',
      compress: true
    }
  }

  html2pdf().set(opt).from(element).save()
}
</script>
