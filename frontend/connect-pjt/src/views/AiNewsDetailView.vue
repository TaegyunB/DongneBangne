<template>
  <div>
    <NewsTemplateOne 
      ref="pdfComponent"
      v-bind="newsData"
    />
    
    <div class="save-button">
      <button @click="saveAsPDF">ğŸ“„ PDFë¡œ ì €ì¥í•˜ê¸°</button>
    </div>
  </div>
</template>

<script setup>
import NewsTemplateOne from '@/components/NewsTemplateOne.vue'
import html2pdf from 'html2pdf.js'
import { ref, nextTick } from 'vue' // âœ… nextTick ë°˜ë“œì‹œ ì¶”ê°€

const pdfComponent = ref(null)

const newsData = {
  seniorCenterName: 'ê°•ì¼ë¦¬ë²„íŒŒí¬',
  month: '07',
  ranking: 1,
  headline: 'AIê°€ ìƒì„±í•œ í—¤ë“œë¼ì¸',
  content: 'ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.ë³¸ë¬¸ ë‚´ìš©ì…ë‹ˆë‹¤. ë„ì „ ì„±ê³µìœ¼ë¡œ ë³´ëŒëœ í•˜ë£¨ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.',
  imageUrl: 'https://picsum.photos/300'
}

const saveAsPDF = async () => {
  await nextTick()
  const element = pdfComponent.value?.pdfTarget

  if (!element) {
    alert("PDF íƒ€ê²Ÿì´ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ì–´ìš”!")
    return
  }

  const opt = {
    margin: [5, 5, 5, 5],
    filename: `${newsData.seniorCenterName}_${newsData.month}_ì‹ ë¬¸.pdf`,
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: {
      scale: 1.5,
      useCORS: true,
      allowTaint: true,
      scrollX: 0,
      scrollY: 0
    },
    jsPDF: {
      unit: 'mm',
      format: 'a4',
      orientation: 'portrait',
      compress: true
    }
  }

  html2pdf().set(opt).from(element).save()
}
</script>
